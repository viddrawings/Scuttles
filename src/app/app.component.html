<div class="wrapper">
  <div class="header">
    <img class="header__image" src="./assets/scuttle.png" alt="scuttles"/>
    <div class="header__title">
      Scuttles
    </div>
    <div class="header__subtitle">
      Made by: viddrawings
    </div>
  </div>

  <div class="game-wrapper">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="game-name">
        <label for="gameName">Game name:</label>
        <input id="gameName" formControlName="gameName" (keydown.enter)="onGameName($event)"/>
        <hr/>
      </div>

      <div>
        <h1>{{gameName}}</h1>
      </div>

      <div class="teams" *ngIf="gameName">
        <div class="team-blue">
          <div class="team-title">
            <div>Blue team</div>
            <button class="disable-unused-players-button" (click)="disableUnusedPlayers(playersBlueTeam)">
              <mat-icon>remove_circle</mat-icon>
            </button>
          </div>

          <div *ngFor="let playerBlueTeam of playersBlueTeam; let i = index">
            <div>
              <div [formGroup]="playerBlueTeam" class="player-row">
                <label>Player</label>
                <img class="role-icon" [src]="roles[i].url" [alt]="roles[i].name"/>
                <input type="text" placeholder="name" formControlName="playerName"/>
                <input type="number" placeholder="points" formControlName="playerGivePoints"/>

                <button class="win-button" (click)="playerWin(playerBlueTeam)">Win</button>
                <button class="lose-button" (click)="playerLose(playerBlueTeam)">Lose</button>
                <button class="clear-button" (click)="clearPlayer(playerBlueTeam)">clear</button>
              </div>
            </div>
          </div>

          <div class="bet-buttons">
            <ng-container *ngFor="let betButton of betButtons">
              <button [ngClass]="'bet-button grey-out ' + betButton" (click)="betButtonClicked(betButton)"></button>
            </ng-container>
          </div>
        </div>

        <div class="team-red">
          <div class="team-title">
          <div>Red team</div>
            <button class="disable-unused-players-button" (click)="disableUnusedPlayers(playersRedTeam)">
              <mat-icon>remove_circle</mat-icon>
            </button>
          </div>

          <div *ngFor="let playerRedTeam of playersRedTeam; let i = index">
            <div>
              <div [formGroup]="playerRedTeam" class="player-row">
                <label>Player</label>
                <img class="role-icon" [src]="roles[i].url" [alt]="roles[i].name"/>
                <input type="text" placeholder="name" formControlName="playerName"/>
                <input type="number" placeholder="points" formControlName="playerGivePoints"/>

                <button class="win-button" (click)="playerWin(playerRedTeam)">Win</button>
                <button class="lose-button" (click)="playerLose(playerRedTeam)">Lose</button>
                <button class="clear-button" (click)="clearPlayer(playerRedTeam)">clear</button>
              </div>
            </div>
          </div>

          <div class="bet-buttons">
            <ng-container *ngFor="let betButton of betButtons">
              <button [ngClass]="'bet-button grey-out ' + betButton" (click)="betButtonClicked(betButton)"></button>
            </ng-container>
          </div>
        </div>
      </div>

      <div class="bets" *ngIf="gameName">
        <div>
          Current bets
        </div>
        <div>
          <app-bets></app-bets>
        </div>
      </div>

      <div class="scoreboard" *ngIf="gameName">
        <div>Scoreboard</div>
        <div>
          <app-scoreboard></app-scoreboard>
        </div>
      </div>

      <div class="extra-options" *ngIf="gameName">
        <button (click)="saveGame()">Save Game</button>
      </div>
    </form>
  </div>
</div>
